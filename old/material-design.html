<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Material Design 3 (Material You) App</title>

    <!-- Fonts: Roboto & Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <style>
        /* =========================================
           1. DESIGN TOKENS (CSS Variables)
           ========================================= */
        :root {
            /* TYPE SCALE */
            --md-sys-typescale-body-large: 400 16px/24px 'Roboto', sans-serif;
            --md-sys-typescale-body-medium: 400 14px/20px 'Roboto', sans-serif;
            --md-sys-typescale-label-large: 500 14px/20px 'Roboto', sans-serif;
            --md-sys-typescale-headline-small: 400 24px/32px 'Roboto', sans-serif;
            --md-sys-typescale-title-medium: 500 16px/24px 'Roboto', sans-serif;

            /* SHAPES */
            --md-sys-shape-corner-extra-small: 4px;
            --md-sys-shape-corner-small: 8px;
            --md-sys-shape-corner-medium: 12px;
            --md-sys-shape-corner-large: 16px;
            --md-sys-shape-corner-extra-large: 28px;
            --md-sys-shape-corner-full: 100px;

            /* MOTION */
            --md-sys-motion-standard: 200ms cubic-bezier(0.2, 0.0, 0, 1.0);
            --md-sys-motion-emphasized: 400ms cubic-bezier(0.2, 0.0, 0, 1.0);

            /* ELEVATION */
            --md-sys-elevation-1: 0 1px 2px rgba(0,0,0,0.3);
            --md-sys-elevation-2: 0 2px 6px 2px rgba(0,0,0,0.15);
            --md-sys-elevation-3: 0 4px 8px 3px rgba(0,0,0,0.15);

            /* --- LIGHT THEME (Default) --- */
            --md-sys-color-primary: #2962FF;
            --md-sys-color-on-primary: #FFFFFF;
            --md-sys-color-primary-container: #E0EAFF;
            --md-sys-color-on-primary-container: #001A4D;
            --md-sys-color-secondary-container: #DDE2F0;
            --md-sys-color-on-secondary-container: #181C28;
            --md-sys-color-surface: #F4F7FC;
            --md-sys-color-surface-container: #FFFFFF;
            --md-sys-color-surface-container-high: #F0F3F9;
            --md-sys-color-outline: #74777F;
            --md-sys-color-outline-variant: #C4C7D0;
            --md-sys-color-on-surface: #1B1B1F;
            --md-sys-color-on-surface-variant: #44474F;

            /* State Layer Opacities */
            --md-sys-state-hover: 0.08;
            --md-sys-state-focus: 0.12;
            --md-sys-state-pressed: 0.12;
        }

        /* --- DARK THEME --- */
        [data-theme="dark"] {
            --md-sys-color-primary: #B0C5FF;
            --md-sys-color-on-primary: #002B75;
            --md-sys-color-primary-container: #0042A9;
            --md-sys-color-on-primary-container: #D9E2FF;
            --md-sys-color-secondary-container: #3E4450;
            --md-sys-color-on-secondary-container: #DDE2F0;
            --md-sys-color-surface: #111318;
            --md-sys-color-surface-container: #1F2229;
            --md-sys-color-surface-container-high: #292C35;
            --md-sys-color-outline: #8D9199;
            --md-sys-color-outline-variant: #44474F;
            --md-sys-color-on-surface: #E2E2E6;
            --md-sys-color-on-surface-variant: #C4C7D0;

            --md-sys-elevation-1: none;
            --md-sys-elevation-2: none;
            --md-sys-elevation-3: none;
        }

        /* =========================================
           2. GLOBAL RESET & BASE STYLES
           ========================================= */
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font: var(--md-sys-typescale-body-large);
            background-color: var(--md-sys-color-surface);
            color: var(--md-sys-color-on-surface);
            transition: background-color var(--md-sys-motion-standard), color var(--md-sys-motion-standard);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
            padding-top: 64px; /* Space for Top App Bar */
        }

        /* Layout Main Content */
        main {
            flex: 1;
            padding: 24px;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
        }

        h2 {
            font: var(--md-sys-typescale-title-medium);
            margin: 24px 0 16px 0;
            color: var(--md-sys-color-on-surface);
            opacity: 0.9;
        }

        .section-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        /* =========================================
           3. TOP APP BAR
           ========================================= */
        .md-top-app-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background-color: var(--md-sys-color-surface);
            display: flex;
            align-items: center;
            padding: 0 16px;
            z-index: 100;
            transition: background-color var(--md-sys-motion-standard);
        }

        /* Scrolled state style (optional JS hook usually) */
        .md-top-app-bar.scrolled {
            background-color: var(--md-sys-color-surface-container);
        }

        .md-top-app-bar .leading-icon,
        .md-top-app-bar .trailing-icon {
            color: var(--md-sys-color-on-surface);
            background: transparent;
            border: none;
            cursor: pointer;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .md-top-app-bar .headline {
            flex: 1;
            font: var(--md-sys-typescale-headline-small); /* Actually Title Large in spec, but headline small works visually */
            font-size: 22px;
            margin-left: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* =========================================
           4. NAVIGATION DRAWER (Modal)
           ========================================= */
        .md-drawer-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.4);
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: opacity var(--md-sys-motion-standard);
        }
        .md-drawer-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }

        .md-drawer {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 300px; /* Standard width */
            background-color: var(--md-sys-color-surface-container);
            border-top-right-radius: var(--md-sys-shape-corner-large);
            border-bottom-right-radius: var(--md-sys-shape-corner-large);
            z-index: 201;
            transform: translateX(-100%);
            transition: transform var(--md-sys-motion-emphasized);
            padding: 12px;
            display: flex;
            flex-direction: column;
        }

        /* Dark Mode Elevation Tint for Drawer */
        [data-theme="dark"] .md-drawer {
            background-color: var(--md-sys-color-surface-container-high);
        }

        .md-drawer.open {
            transform: translateX(0);
        }

        .md-drawer-item {
            height: 56px;
            border-radius: var(--md-sys-shape-corner-full);
            display: flex;
            align-items: center;
            padding: 0 16px 0 24px;
            color: var(--md-sys-color-on-surface-variant);
            text-decoration: none;
            margin-bottom: 4px;
            font: var(--md-sys-typescale-label-large);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .md-drawer-item .material-symbols-outlined {
            margin-right: 12px;
        }

        .md-drawer-item.active {
            background-color: var(--md-sys-color-secondary-container);
            color: var(--md-sys-color-on-secondary-container);
            font-weight: 700;
        }

        /* =========================================
           5. BUTTONS & FAB
           ========================================= */
        .md-btn {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            height: 40px;
            padding: 0 24px;
            border-radius: var(--md-sys-shape-corner-full);
            font: var(--md-sys-typescale-label-large);
            border: none;
            cursor: pointer;
            overflow: hidden;
            transition: all var(--md-sys-motion-standard);
            user-select: none;
            min-width: 64px;
            z-index: 1;
        }

        /* State Layer */
        .md-btn::before {
            content: "";
            position: absolute;
            inset: 0;
            background-color: currentColor;
            opacity: 0;
            transform: scale(0.6);
            transition: opacity 200ms cubic-bezier(0.2, 0.0, 0, 1.0), transform 200ms cubic-bezier(0.2, 0.0, 0, 1.0);
            pointer-events: none;
            border-radius: inherit;
            z-index: -1;
        }
        .md-btn:hover::before { opacity: var(--md-sys-state-hover); transform: scale(1); }
        .md-btn:active::before { opacity: var(--md-sys-state-pressed); transform: scale(1); }

        .md-btn-filled {
            background-color: var(--md-sys-color-primary);
            color: var(--md-sys-color-on-primary);
            box-shadow: var(--md-sys-elevation-1);
        }
        .md-btn-outlined {
            background-color: transparent;
            color: var(--md-sys-color-primary);
            border: 1px solid var(--md-sys-color-outline);
        }
        .md-btn-text {
            background-color: transparent;
            color: var(--md-sys-color-primary);
            padding: 0 12px;
        }

        /* FAB */
        .md-fab {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: var(--md-sys-shape-corner-large); /* 16px */
            background-color: var(--md-sys-color-primary-container);
            color: var(--md-sys-color-on-primary-container);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--md-sys-elevation-3);
            border: none;
            cursor: pointer;
            transition: all var(--md-sys-motion-standard);
            z-index: 90;
        }
        .md-fab:hover {
            box-shadow: 0 6px 10px 4px rgba(0,0,0,0.15); /* Elevate on hover */
        }

        /* =========================================
           6. INPUTS & SELECTORS
           ========================================= */
        /* Text Field */
        .md-field {
            position: relative;
            background-color: var(--md-sys-color-surface-container-high);
            border-top-left-radius: var(--md-sys-shape-corner-extra-small);
            border-top-right-radius: var(--md-sys-shape-corner-extra-small);
            /* MD3 often uses fully rounded corners for search, but small corners for inputs.
               Let's use extra-small (4px) or small (8px) for filled inputs. */
            border-radius: 4px 4px 0 0;
            height: 56px;
            display: flex;
            align-items: center;
            padding: 0 16px;
            transition: background-color var(--md-sys-motion-standard);
            margin-bottom: 16px;
        }
        .md-field::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background-color: var(--md-sys-color-outline);
            transition: all var(--md-sys-motion-standard);
        }
        .md-field:focus-within::after {
            height: 2px;
            background-color: var(--md-sys-color-primary);
        }
        .md-field input, .md-field select {
            width: 100%;
            height: 100%;
            background: transparent;
            border: none;
            outline: none;
            font: var(--md-sys-typescale-body-large);
            color: var(--md-sys-color-on-surface);
            padding-top: 24px;
            padding-bottom: 8px;
            caret-color: var(--md-sys-color-primary);
            cursor: pointer;
        }
        .md-field label {
            position: absolute;
            left: 16px;
            top: 18px;
            font: var(--md-sys-typescale-body-large);
            color: var(--md-sys-color-on-surface-variant);
            pointer-events: none;
            transition: all var(--md-sys-motion-standard);
        }
        .md-field input:focus ~ label,
        .md-field input:not(:placeholder-shown) ~ label,
        .md-field.has-value label {
            top: 8px;
            font-size: 12px;
            line-height: 16px;
            color: var(--md-sys-color-primary);
        }

        /* Dropdown/Select Specifics */
        .md-select-wrapper {
            position: relative;
            width: 100%;
        }
        .md-field .trailing-icon {
            color: var(--md-sys-color-on-surface-variant);
            pointer-events: none;
        }

        /* Dropdown Menu (Popover) */
        .md-menu {
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 100%; /* Or fixed width */
            background-color: var(--md-sys-color-surface-container);
            border-radius: var(--md-sys-shape-corner-extra-small);
            box-shadow: var(--md-sys-elevation-2);
            padding: 8px 0;
            margin-top: 4px;
            display: none;
            z-index: 1000;
            transform-origin: top;
            animation: scaleIn 200ms cubic-bezier(0.2, 0.0, 0, 1.0);
        }
        [data-theme="dark"] .md-menu {
            background-color: var(--md-sys-color-surface-container-high);
            box-shadow: none;
            border: 1px solid var(--md-sys-color-outline-variant);
        }
        .md-menu.open { display: block; }

        .md-menu-item {
            padding: 0 12px;
            height: 48px;
            display: flex;
            align-items: center;
            font: var(--md-sys-typescale-body-large);
            color: var(--md-sys-color-on-surface);
            cursor: pointer;
            transition: background-color var(--md-sys-motion-standard);
        }
        .md-menu-item:hover {
            background-color: rgba(var(--md-sys-color-on-surface), 0.08); /* Simulated state layer */
        }
        .md-menu-item.selected {
            background-color: var(--md-sys-color-secondary-container);
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scaleY(0.8); }
            to { opacity: 1; transform: scaleY(1); }
        }

        /* =========================================
           7. SELECTION CONTROLS (Switch, Checkbox, Radio, Chip)
           ========================================= */
        .control-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--md-sys-color-outline-variant);
        }
        .control-label {
            font: var(--md-sys-typescale-body-large);
        }

        /* Switch */
        .md-switch {
            position: relative;
            width: 52px;
            height: 32px;
            display: inline-block;
        }
        .md-switch input { opacity: 0; width: 0; height: 0; }
        .md-switch-track {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: var(--md-sys-color-surface-container-high);
            border: 2px solid var(--md-sys-color-outline);
            border-radius: 32px;
            transition: .4s;
        }
        .md-switch-handle {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 6px;
            bottom: 6px;
            background-color: var(--md-sys-color-outline);
            border-radius: 50%;
            transition: .4s cubic-bezier(0.2, 0.0, 0, 1.0);
        }
        /* Checked State */
        .md-switch input:checked + .md-switch-track {
            background-color: var(--md-sys-color-primary);
            border-color: var(--md-sys-color-primary);
        }
        .md-switch input:checked + .md-switch-track .md-switch-handle {
            transform: translateX(20px);
            background-color: var(--md-sys-color-on-primary);
            width: 24px; /* Icon grows in active state in MD3 */
            height: 24px;
            bottom: 2px;
            left: 2px;
        }

        /* Checkbox */
        .md-checkbox {
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
            gap: 12px;
        }
        .md-checkbox input {
            appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid var(--md-sys-color-on-surface-variant);
            border-radius: 2px;
            display: grid;
            place-content: center;
            transition: all 0.2s;
        }
        .md-checkbox input::before {
            content: "check";
            font-family: 'Material Symbols Outlined';
            font-size: 14px;
            color: var(--md-sys-color-on-primary);
            transform: scale(0);
            transition: 0.2s;
        }
        .md-checkbox input:checked {
            background-color: var(--md-sys-color-primary);
            border-color: var(--md-sys-color-primary);
        }
        .md-checkbox input:checked::before {
            transform: scale(1);
        }

        /* Chips */
        .md-chip-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 8px;
        }
        .md-chip {
            height: 32px;
            border: 1px solid var(--md-sys-color-outline);
            border-radius: 8px;
            padding: 0 12px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font: var(--md-sys-typescale-label-large);
            color: var(--md-sys-color-on-surface-variant);
            cursor: pointer;
            background: transparent;
            transition: all 0.2s;
        }
        .md-chip.active {
            background-color: var(--md-sys-color-secondary-container);
            color: var(--md-sys-color-on-secondary-container);
            border-color: transparent;
        }
        .md-chip:hover {
            background-color: rgba(0,0,0,0.05);
        }

        /* =========================================
           8. CARD
           ========================================= */
        .md-card {
            background-color: var(--md-sys-color-surface-container);
            border-radius: var(--md-sys-shape-corner-medium);
            padding: 24px;
            /* Light mode shadow */
            box-shadow: var(--md-sys-elevation-1);
            position: relative;
            overflow: hidden;
        }
        [data-theme="dark"] .md-card {
            background-color: var(--md-sys-color-surface-container);
            /* Dark mode elevation tint overlay simulation */
            background-image: linear-gradient(rgba(208, 188, 255, 0.05), rgba(208, 188, 255, 0.05));
            box-shadow: none;
        }

        /* =========================================
           RIPPLE ANIMATION
           ========================================= */
        span.ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 600ms cubic-bezier(0.4, 0, 0.2, 1);
            background-color: currentColor;
            opacity: 0.12;
            pointer-events: none;
        }
        @keyframes ripple {
            to { transform: scale(4); opacity: 0; }
        }

    </style>
</head>
<body data-theme="light">

    <!-- TOP APP BAR -->
    <header class="md-top-app-bar">
        <button class="leading-icon ripple-target" id="menuBtn">
            <span class="material-symbols-outlined">menu</span>
        </button>
        <span class="headline">Task Master</span>
        <button class="trailing-icon ripple-target" id="themeToggle">
            <span class="material-symbols-outlined">dark_mode</span>
        </button>
        <button class="trailing-icon ripple-target">
            <span class="material-symbols-outlined">account_circle</span>
        </button>
    </header>

    <!-- NAVIGATION DRAWER -->
    <div class="md-drawer-overlay" id="drawerOverlay"></div>
    <nav class="md-drawer" id="navDrawer">
        <div style="padding: 16px 16px 24px 16px;">
            <div style="font: var(--md-sys-typescale-title-medium);">Menu</div>
        </div>

        <div class="md-drawer-item active ripple-target">
            <span class="material-symbols-outlined">dashboard</span>
            Dashboard
        </div>
        <div class="md-drawer-item ripple-target">
            <span class="material-symbols-outlined">check_circle</span>
            My Tasks
        </div>
        <div class="md-drawer-item ripple-target">
            <span class="material-symbols-outlined">folder</span>
            Projects
        </div>
        <div style="flex: 1"></div>
        <div class="md-drawer-item ripple-target">
            <span class="material-symbols-outlined">settings</span>
            Settings
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main>

        <!-- DASHBOARD GRID -->
        <section class="section-grid">
            <!-- Card 1 -->
            <div class="md-card">
                <h3 style="font: var(--md-sys-typescale-title-medium); margin-bottom: 8px;">Pending Tasks</h3>
                <div style="font-size: 32px; font-weight: 400; color: var(--md-sys-color-primary);">12</div>
                <div style="font-size: 14px; color: var(--md-sys-color-on-surface-variant); margin-top: 4px;">3 High Priority</div>
                <div style="display: flex; gap: 8px; margin-top: 16px; justify-content: flex-end;">
                    <button class="md-btn md-btn-text ripple-target">View All</button>
                </div>
            </div>

            <!-- Card 2 -->
            <div class="md-card">
                <h3 style="font: var(--md-sys-typescale-title-medium); margin-bottom: 8px;">Project Status</h3>
                <div style="height: 4px; background: var(--md-sys-color-secondary-container); width: 100%; border-radius: 2px; margin-top: 12px;">
                    <div style="height: 100%; width: 70%; background: var(--md-sys-color-primary); border-radius: 2px;"></div>
                </div>
                <div style="font-size: 14px; color: var(--md-sys-color-on-surface-variant); margin-top: 8px;">70% Complete</div>
            </div>
        </section>

        <!-- INPUTS SECTION -->
        <h2>New Task</h2>
        <div class="md-card" style="overflow: visible;"> <!-- Visible overflow for dropdowns -->

            <!-- Text Input -->
            <div class="md-field">
                <input type="text" id="taskTitle" placeholder=" " />
                <label for="taskTitle">Task Title</label>
            </div>

            <!-- Custom Dropdown (Select) -->
            <div class="md-select-wrapper" id="prioritySelectWrapper">
                <div class="md-field ripple-target" id="priorityTrigger">
                    <input type="text" readonly value="Medium Priority" id="priorityInput" style="pointer-events: none;" />
                    <label class="has-value">Priority Level</label>
                    <span class="material-symbols-outlined trailing-icon">arrow_drop_down</span>
                </div>
                <!-- Menu -->
                <div class="md-menu" id="priorityMenu">
                    <div class="md-menu-item ripple-target" data-value="High Priority">High Priority</div>
                    <div class="md-menu-item selected ripple-target" data-value="Medium Priority">Medium Priority</div>
                    <div class="md-menu-item ripple-target" data-value="Low Priority">Low Priority</div>
                </div>
            </div>

            <!-- Chip Group (Tags) -->
            <div style="margin-top: 16px;">
                <label style="font: var(--md-sys-typescale-label-large); color: var(--md-sys-color-on-surface-variant);">Tags</label>
                <div class="md-chip-group">
                    <div class="md-chip active ripple-target">Design</div>
                    <div class="md-chip ripple-target">Development</div>
                    <div class="md-chip ripple-target">Marketing</div>
                    <div class="md-chip ripple-target"><span class="material-symbols-outlined" style="font-size: 16px;">add</span> Add Tag</div>
                </div>
            </div>

            <!-- Actions -->
            <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 24px;">
                <button class="md-btn md-btn-text ripple-target">Cancel</button>
                <button class="md-btn md-btn-filled ripple-target">Create Task</button>
            </div>
        </div>

        <!-- SETTINGS CONTROLS -->
        <h2>Settings</h2>
        <div class="md-card">

            <!-- Switch -->
            <div class="control-row">
                <span class="control-label">Email Notifications</span>
                <label class="md-switch">
                    <input type="checkbox" checked>
                    <span class="md-switch-track">
                        <span class="md-switch-handle"></span>
                    </span>
                </label>
            </div>

            <!-- Checkbox -->
            <div class="control-row">
                <span class="control-label">Sync to Cloud</span>
                <label class="md-checkbox">
                    <input type="checkbox">
                    <span>Enabled</span>
                </label>
            </div>

            <!-- Radio Group (Simplified Visual) -->
            <div style="margin-top: 16px;">
                <div style="font: var(--md-sys-typescale-label-large); color: var(--md-sys-color-on-surface-variant); margin-bottom: 8px;">View Mode</div>
                <div style="display: flex; gap: 24px;">
                    <label class="md-checkbox">
                        <input type="radio" name="view" checked style="border-radius: 50%;">
                        <span>List</span>
                    </label>
                    <label class="md-checkbox">
                        <input type="radio" name="view" style="border-radius: 50%;">
                        <span>Board</span>
                    </label>
                </div>
            </div>
        </div>

    </main>

    <!-- FAB -->
    <button class="md-fab ripple-target">
        <span class="material-symbols-outlined">edit</span>
    </button>

    <script>
        /* ------------------------------------------------
           LOGIC: RIPPLES, DRAWER, MENU, THEME
           ------------------------------------------------ */

        // 1. RIPPLE ENGINE
        function createRipple(event) {
            const btn = event.currentTarget;
            const circle = document.createElement('span');
            const diameter = Math.max(btn.clientWidth, btn.clientHeight);
            const radius = diameter / 2;

            circle.style.width = circle.style.height = `${diameter}px`;
            circle.style.left = `${event.clientX - btn.getBoundingClientRect().left - radius}px`;
            circle.style.top = `${event.clientY - btn.getBoundingClientRect().top - radius}px`;
            circle.classList.add('ripple');

            const existingRipple = btn.getElementsByClassName('ripple')[0];
            if (existingRipple) existingRipple.remove();

            circle.addEventListener('animationend', () => circle.remove());
            btn.appendChild(circle);
        }

        document.querySelectorAll('.ripple-target').forEach(btn => {
            btn.addEventListener('click', createRipple);
        });

        // 2. NAVIGATION DRAWER LOGIC
        const menuBtn = document.getElementById('menuBtn');
        const drawer = document.getElementById('navDrawer');
        const overlay = document.getElementById('drawerOverlay');

        function toggleDrawer() {
            const isOpen = drawer.classList.contains('open');
            if (isOpen) {
                drawer.classList.remove('open');
                overlay.classList.remove('open');
            } else {
                drawer.classList.add('open');
                overlay.classList.add('open');
            }
        }

        menuBtn.addEventListener('click', toggleDrawer);
        overlay.addEventListener('click', toggleDrawer);

        // Drawer items close drawer on click (simulated navigation)
        document.querySelectorAll('.md-drawer-item').forEach(item => {
            item.addEventListener('click', (e) => {
                // Visual active state toggle
                document.querySelectorAll('.md-drawer-item').forEach(i => i.classList.remove('active'));
                e.currentTarget.classList.add('active');

                // Add ripple then close
                createRipple(e);
                setTimeout(toggleDrawer, 200);
            });
        });

        // 3. DROPDOWN MENU LOGIC
        const priorityTrigger = document.getElementById('priorityTrigger');
        const priorityMenu = document.getElementById('priorityMenu');
        const priorityInput = document.getElementById('priorityInput');

        priorityTrigger.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent closing immediately
            priorityMenu.classList.toggle('open');
        });

        // Handle Item Selection
        document.querySelectorAll('.md-menu-item').forEach(item => {
            item.addEventListener('click', (e) => {
                const value = e.currentTarget.getAttribute('data-value');
                priorityInput.value = value;

                // Visual selection update
                document.querySelectorAll('.md-menu-item').forEach(i => i.classList.remove('selected'));
                e.currentTarget.classList.add('selected');

                priorityMenu.classList.remove('open');
            });
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!priorityTrigger.contains(e.target) && !priorityMenu.contains(e.target)) {
                priorityMenu.classList.remove('open');
            }
        });

        // 4. CHIP TOGGLE
        document.querySelectorAll('.md-chip').forEach(chip => {
            chip.addEventListener('click', (e) => {
                if(!e.currentTarget.innerHTML.includes('Add')) {
                   e.currentTarget.classList.toggle('active');
                }
            });
        });

        // 5. THEME TOGGLE
        const themeBtn = document.getElementById('themeToggle');
        const themeIcon = themeBtn.querySelector('span');

        themeBtn.addEventListener('click', () => {
            const current = document.body.getAttribute('data-theme');
            if (current === 'dark') {
                document.body.setAttribute('data-theme', 'light');
                themeIcon.textContent = 'dark_mode';
            } else {
                document.body.setAttribute('data-theme', 'dark');
                themeIcon.textContent = 'light_mode';
            }
        });

    </script>
</body>
</html>
